{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023y03m/cicd/","result":{"data":{"site":{"siteMetadata":{"title":"코딩 주머니"}},"markdownRemark":{"id":"966e3e8d-72fd-5192-95b7-c75c945b479c","excerpt":"AS-IS…","html":"<h1 id=\"AS-IS\" style=\"position:relative;\">AS-IS<a href=\"#AS-IS\" aria-label=\"AS IS permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f9df77f2b05260674100a036e1e3c47f/34e70/ASIS.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGUlEQVR42n1Ta0iTYRR+vm9W28zb3Jw571NrdkOWkUE5nZqW5bfE6Ff1o/JHRhSEoIFRIUZEEZoSFBVhKCVBgV1ELMPUvDSiaTEzydvS0mxKWnbiffsEi/CFw3sO7zkPz3nOeYEFjjk2BgkrjIgK1GpSLZsTN1qs8QA8jXqtbos1edNGS/I6AOrEuFXG5JTUpFVxZtNCeHjqeC84nT14eK8mrLbfPVo/PNUdUfka7u/TgU8GJ911Q1P2wo4RtLgm99wfmKLW/tEzCwJmVLeJyXfssFTURu62/6BON40hpxur2ylo35tf1PGNXLj5GfGts7kFPUT0Y/rS3whEmOisxsjgCFrsnR7TROIMEQovlusTmqZqKnsnKlnO8fvNAZsbxx9X97lvsHh7w/DWzOZvbQPDnw4yGA8ASm5EmGy+DlfvIF45HCAi9q7I3LY1NzU6aAMAL+iNi1iNCghg79dmeY5KALScVPCeB+HBB5oqdLvupiD7NQcZGxhZ9qq7q/Rt3/udXTNfkJ2dfdSanpEKQPzTCLFbd9s+kF7UOHSoqrTME4A/B1x7mcIiTlGz/5GvGdg5DiIHfhLF2d910YfB/lu1T+sRGRoG0/IYnp93+DAuVtzQ5PlCWdUyfPXCo49ENOPT/qIDY0QCjtWRoN9RHqvdVaMEEnjRiUslIW0u5/6XQ+82lN+5iWWGIE9RFFlLWkEQlEsWL1YD8Ck+edrU8Oh53Lr1Zi/WtkKhWIrz584GmgxK0xUH1wJqtSoMgHfVs1q4aGZuXBoAsQCW449WgR4ei1YCCOW6ylLwOayJDmLOUqadWqUy5OTkRJaWlYUXny0JaRntESDwRD+5OEQGD2Dyq9TqEI2/Ti+KImfI82w2G7KysvYmJSXp2fQMBgNHyM/Ph0KhmM8wGkCU7OvlOIKxBRAOIIa/S5LkKUnSBZvNFmu1WpGWliY6nU4UFRXN31A/GSB6HkPmR8q+Sm7bm7FjoGw1YDabYbFYUFBQ8O+n0cj6xcxpKMdRMuCchks4mCRJonxz+8/xBWCUjbHVyX64vH9sD/nkfwNeRSBPtRN+ZgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ASIS\"\n        title=\"\"\n        src=\"/static/f9df77f2b05260674100a036e1e3c47f/f058b/ASIS.png\"\n        srcset=\"/static/f9df77f2b05260674100a036e1e3c47f/c26ae/ASIS.png 158w,\n/static/f9df77f2b05260674100a036e1e3c47f/6bdcf/ASIS.png 315w,\n/static/f9df77f2b05260674100a036e1e3c47f/f058b/ASIS.png 630w,\n/static/f9df77f2b05260674100a036e1e3c47f/40601/ASIS.png 945w,\n/static/f9df77f2b05260674100a036e1e3c47f/34e70/ASIS.png 1053w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>현재 모두 수동으로 반영하고 있다.</p>\n<ul>\n<li><strong><code class=\"language-text\">Bitbucket</code>은 형상관리 역할만 하기에 커밋 내용과 <code class=\"language-text\">Nexus</code>의 도커 이미지가 동일하다는 것이 보장되지 않는다.</strong></li>\n<li><strong><code class=\"language-text\">Nexus</code>에 이미지를 넣기 위해 쉘 스크립트를 직접 실행시켜줘야 한다.</strong></li>\n<li><strong>그리고 도커 이미지 태깅을 직접 작성하기에 잘 못 작성할 여지가 있다.</strong></li>\n</ul>\n<p>위의 문제를 해결하기 위해 아래와 같은 CI/CD를 구축해보려 한다.</p>\n<h1 id=\"TO-BE\" style=\"position:relative;\">TO-BE<a href=\"#TO-BE\" aria-label=\"TO BE permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><code class=\"language-text\">Jenkins</code>가 Webhook을 받아 테스트를 실행하고 이미지를 빌드하여 푸시한다.</p>\n<p><strong>통합 테스트는 어디에서 실행되어야 하나?</strong><br>\n통합 테스트를 진행하는 서비스가 다른 서비스에 의존한다면?<br>\n검색을 위한 테스트를 검증하기 위해서는 여러 서비스가 같이 있어야 하는데 주위 서비스들을 모두 mock으로 대체할 것인가?</p>\n<h2>서비스 기준 통합 테스트</h2>\n<p>포테이너에 이미지를 푸시하기전에, 배포하는 서비스 기준으로 통합 테스트를 하면 아래와 같을 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e4e4f0cb7ecec823860e487e63f6c5c4/d56e1/TOBE.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.72151898734178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVR42k2TO4/kRBSF/UdZERLD/gMkyEgIQIJkxURIRCAkRLQCtGTDPrq31+9p22277fa0H+Vy2y5/qMozPVvSlW+Vb517fO6xtZxPLKecpTrCfcGQxST2xuRzmTEfE/rgA7vdjt37LXVdU51ObN+9xfNcuq4j8Fw2m3fEcYzFw1oenmXb8M/rWxQwTDO9HOjjgDdlx995v9Yuile54E0lzT6sJS+PF6JDiqWBFqVMkV710JHUBcu1Bcx5xGebid+rdZ9f4NlmwV7x+TpQfJvCUBUfMVxWACkEeZrRC2E+bxpHyCO+2jb8EjYwSspW8MXrmv+KDsaeG7/hG7tlrCusZWqZx8uVTTdIDmnEpBR9L1HTBOfSAOVJ/CRNEsG83murkuZUmNx6/lPI4XjmIgWjgs0fv/Hnd19SBv7KXAPqYY0TTdOuEqiFIs/YFYK/woaL7Knb9Z31yQ3EWYW921I3Db++uOHzZ5+SbDemQI2jccCToiCHgVF2vNye+PnfzJxN84xSCmt/SJmnkWEYzIuml+z8kLMQSM1OA6QRcZJwd3dndNWxjyLyLKXvGrpOIIQwFrIOWYYQnSmap3kFaBvy21t6x4WypA5dXM/DcWzyPCdNU2zbxvd9jkVxZd73PVZ2fDqQUppOp7JEVhXD/T0MA+3exw8CHNvmeDya0IBhGJoGOrIsoygKrO9/+NFYZpomA/Zoch39cGGeJtoowPX9K0N9WQMGQWDY7vf7a25pbbQ1tI7yEVB02u0MUjI/MPT8AMdxDDsNqnMNUpalGYZemtDV2Fr+Xn08SxiW9bxJ9jiua/7nR4Y69zzPNJjnVXszFBX7LJGL2jt0H94idNhPoYL3TMGO8v5MnmdGeB0aSLPT7tB7Dabz/wGfiR+GJazf5QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TOBE\"\n        title=\"\"\n        src=\"/static/e4e4f0cb7ecec823860e487e63f6c5c4/f058b/TOBE.png\"\n        srcset=\"/static/e4e4f0cb7ecec823860e487e63f6c5c4/c26ae/TOBE.png 158w,\n/static/e4e4f0cb7ecec823860e487e63f6c5c4/6bdcf/TOBE.png 315w,\n/static/e4e4f0cb7ecec823860e487e63f6c5c4/f058b/TOBE.png 630w,\n/static/e4e4f0cb7ecec823860e487e63f6c5c4/40601/TOBE.png 945w,\n/static/e4e4f0cb7ecec823860e487e63f6c5c4/d56e1/TOBE.png 1130w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>테스트 상황별(Hotfix Test, Integration Test 등)로 테스트 코드를 관리하기 위해 <code class=\"language-text\">Gradle Task</code>를 각각 선언하여 경로별로 할 수 있지만 서버에 테스트 코드가 같이 존재하면 커밋이 복잡해져 분리하자는 요구사항이 있었다.<br>\n하지만 <strong>서비스 기준으로 통합 테스트를 진행할 때 서버를 분리해서 진행하기는 힘들다.</strong><br>\n분리하기 위해서는 여러 서비스와 DB가 얽혀있는 API를 테스트하려 한다면 얽혀있는 모든 컴포넌트들을 실행시켜야 한다.<br>\n분리하지 않고 테스트 코드를 서비스 내에 위치시킨다면 얽혀있는 컴포넌트들을 위한 mock 테스트 개발이 필요하다.</p>\n<blockquote>\n<p><strong>테스트를 위한 많은 개발 비용이 필요하며 mock을 사용하는 만큼 테스트에 대한 신뢰성이 떨어진다.</strong></p>\n</blockquote>\n<h2>인프라 기준 통합 테스트</h2>\n<p>모든 인프라가 구축이 완료된 테스트 서버(stack)에서 통합 테스트를 진행하면 아래와 같을 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cee73708c286ca69b69236e05644e708/7bf07/TOBE2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.18987341772153%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjklEQVR42mWTW2vjZhCG9V+XXpbSm17uZfcn9KpLL0rpslsKZaFQCgkt2dYbp47joyTbsmXLp9iWdfgOsg7Poi8k8dIBMTMa6flezYwszqyqKuOD9ZrdMTRxURTkeU6wmHPd7uAHK5SU2I5Ds9MnimNWy4DmXY/RdIZ1DnsE9r0Rk+Xc5EprVJrgHFLezBXHrDDPXGwz/lhJE/ui4M1Csw5jrLKsqK9z4HK/IUyjM+0F7+aCL4bPd76yK35YPcTv7yte1LVMPiusrSxL48PwSJIIjscjcZJAVeIdJT85O5IkpcoUf84jLv0DFBnjQ2pqQqRY7mSKM56SF8UT2B91uQ8mFGVFkedPyndzD51lJj6lMZvVgrSoyJUgDHyqssT69nfN1z/H7O63eP6McLni+2++5O2rl1Sn/LNh1UeqOCHabOGkuRzu+e5qa2oqfxBkXTolvzQlmUzZHw7kWvP69Y/89u7XsxbmqGBKEvgkdpes8Tey3WTZGxD0XbLAQ64X6PUCqzoJNgsPKSUiTZ8ZZWl6GMUJlVYsure4oxEz1ya12ziOzXQ2ZdduoJe+eUfstlh1n45RbAZS71u9dzU8iiLCMETpDDLNfNBh4s/xHJu432LkuiYPbq9RmyV1U5LDHst1XRqNhjlBa21gSinjsyxDn06USrIYdPDOgSPX5Ot2k9ndf7jeFH/kYrXbbS4uLh4kC/G0Oo8mlaKQglnnlt5wiNPtkPRb9LsdBrbNstUgmo2JheSwWn6+h7Wq/wG1ppApvj3ADVaMx2Pi4R32xGMUrAnubsijh99USYFVr8QjpP7UNE0N2AxJCIRUpoeb5hXTm38Jbv5Btj4wvb5i1vrI/uNfiN4Nwp8Quz0+AUwdz+HhozM3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TOBE2\"\n        title=\"\"\n        src=\"/static/cee73708c286ca69b69236e05644e708/f058b/TOBE2.png\"\n        srcset=\"/static/cee73708c286ca69b69236e05644e708/c26ae/TOBE2.png 158w,\n/static/cee73708c286ca69b69236e05644e708/6bdcf/TOBE2.png 315w,\n/static/cee73708c286ca69b69236e05644e708/f058b/TOBE2.png 630w,\n/static/cee73708c286ca69b69236e05644e708/40601/TOBE2.png 945w,\n/static/cee73708c286ca69b69236e05644e708/7bf07/TOBE2.png 1128w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>통합 테스트를 실행할 서버와 서비스 서버를 분리</strong>한 상태에서 진행하기가 수월하다.<br>\n포테이너에서 배포할 서비스 이미지 업데이트가 끝난 후에, 통합 테스트를 실행한다면 가능하다.<br>\n이미 주변 컴포넌트들이 <code class=\"language-text\">stack</code>내에 위치해 실행되고 있기 때문이다.</p>\n<p>해당 위치에서 통합 테스트가 실행된다면 <strong>Postman CLI (newman)으로 json파일 기준으로 통합 테스트를 실행하는 방법</strong>을 적용할 수 있을 것 같다.</p>\n<blockquote>\n<p><strong>서비스 기준 통합 테스트에 비해 개발 비용은 낮을 것으로 예상되며, mock을 사용하지 않는 만큼 테스트에 대한 신뢰는 올라가지만, 개인적인 작업 환경을 구축하기는 힘들다.</strong></p>\n</blockquote>\n<p><strong>인프라 기준 통합 테스트</strong> 구축을 위한 통합 테스트를 실행하고, 테스트 케이스를 관리하는 여러 방법을 찾아보자.</p>\n<h3>CASE 1. Jenkins + Postman (+ newman)</h3>\n<p>Postman의 테스트 스크립트를 이용하여 JSON파일로 만들고, 해당 JSON파일을 프로젝트 내에 위치시키고 Jenkins에서 newman을 실행시켜 보았다.<br>\n테스트를 위해 <code class=\"language-text\">test</code>와 <code class=\"language-text\">build</code> 단계는 빼고, 테스트 케이스를 실행하기 위한 테스트만 진행해 보았다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26bac24ae2a14bbbe5a55572a24b52df/eb4a1/case1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.92405063291139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPElEQVR42m1Tu24TURBdiSaBBtIgCn8AFVH+gIaeGimAFCJKFKH8QDoaClKAxT8YaiSTNG5ASEZGjpLgB157vevHPryP+9jdg2bMJmvkkY7uY+aee2buXAMA8jxnkJmmiW63CyklkiRGHJeR/MO69XI0CkIypRSEEDxPEgWlNNJ0HdL/oJFlKYswyuqIQIgEWQacn8ewbQVypSl4j0BzITRfWMbSny0VFipJYZIk0DqH6yrEscYiSuEHArNZANt2MZ+HWGdhmEFKDSMIAiYiyzIildeq8gytbyewhx3ESYJer4uJY+Ptu2M8efYc+y/2sPt0F4eHr+G6EbTOYHyq1VCv1zEajXB5+ZsPDU0LvYGNX6en+HCwj/rHY6RSQQoBxwvw6vEj3L9p4MbGLWxubKJSqcA0HRZi/Gw20el0+IUmkwkWiwWUTCFEjrFp4ujoDb7UPmM+m2JomhiMHbw/2MPLhzvYunsPW3duY3v7AZeDsjKGwyGU1lxQgpSCC+x5GlIBYZQiSnJMJgEGAwdBIHF2McD3H22cfG2g2TxDq3WBIFDQOoUxnU4RRRE/udaaH6VslEbRBUWdixbzfX8lllrIaLfbVyS0UczpEmqhgqxMSjH9fp8FFJldEVarVTQaDXaGYcjBeZbB9zyuZ3GACMlPGVmWxfHXqpeEtGcs+04ziMSZT4FxCPlnBj8OYY0s7gDHceC6Ln9Lqjut6Zt6nreStrFar5wDqDf9wOexDFJcKLRtm0fqjMJPF/4F36HGRkSHwusAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"case1\"\n        title=\"\"\n        src=\"/static/26bac24ae2a14bbbe5a55572a24b52df/f058b/case1.png\"\n        srcset=\"/static/26bac24ae2a14bbbe5a55572a24b52df/c26ae/case1.png 158w,\n/static/26bac24ae2a14bbbe5a55572a24b52df/6bdcf/case1.png 315w,\n/static/26bac24ae2a14bbbe5a55572a24b52df/f058b/case1.png 630w,\n/static/26bac24ae2a14bbbe5a55572a24b52df/40601/case1.png 945w,\n/static/26bac24ae2a14bbbe5a55572a24b52df/eb4a1/case1.png 1083w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>장점</strong></p>\n<ol>\n<li>Postman에서 export된 JSON 파일로 테스트를 실행하기 때문에, 로컬에서 테스트하기도 쉽고, 접근성이 용이하다.</li>\n</ol>\n<p><strong>단점</strong></p>\n<ol>\n<li>Postman script에 대한 학습이 조금 필요하다.</li>\n<li>gRPC는 JSON으로 export되지 않는다.</li>\n<li>JSON 파일을 어떻게 관리할지 구상하여야 한다.</li>\n</ol>\n<h4 id=\"로컬에서-Postman-CLI-사용해보기\" style=\"position:relative;\"><strong>로컬에서 Postman CLI 사용해보기</strong><a href=\"#%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-Postman-CLI-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"로컬에서 Postman CLI 사용해보기 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 552px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5bab68a1377714583a83d3f7d384bacd/08c0b/folderStructure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.86075949367089%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR42nWSDW+bMBCG+f+/aNMmTZq0tjTLUtolgSQEYr6SNhAoDWBD/EyQdmrX7qRHZ599p9fnM2bfrlmOLHbXJsHFJcV0ihaCzvc5+ZsP8DkFIacbC51mUFfoLIOqojdD5Sn76onZ0uHOmZGWOS0g6ZCc3qP7OLT7LRQ5ejJBf/0CQpwLWmbK3c0e6yrAGsW4s4LEb4nWkshT71lLYtEhJgea9DgU0Tyb1hi/nCNfp4JgE1EUR1qlqStF9T+OCqkU27Dl8XAup0/PaDDyvSQpn1i5LnN7ThRH5EWOavtE+R4p6bTkIZE8FS/a9F+dxm7bcLs9sFyuyLKMsiyp6hql1IdIqehOisO+xR5rpiYsJpr5CLzpULBGZAVCBNi2TZJsUaodEht5VvSappG0Xa9QcXjQnDpoKo1sGDDS+wY7zfE2G6w7i3ib8JDuqWVNoxrqf5ENrW64jxXl4fVzzxifYhvz/jdmOMLKpgO3hzleGwz4XTjg9bQBayXwO8FN7pJXzdsW9p+yKLcEImaxcIjjhCiKiOOYMDz7IAgG38eDIBz6rJUmUTtidhS6JOVAQUlNg1F2jxz3Geulh+u4LGYLXGfFeuHirzycqcPKXg1nvReeoJ/8rM3xdcgFY670hM98RxBjWM2ceTbjh29iBmMuNyMuNteY4Zir4Oew73lZ9/ecfMWNmpHrR95ONvwBn5yIbr1mjOIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"folderStructure\"\n        title=\"\"\n        src=\"/static/5bab68a1377714583a83d3f7d384bacd/08c0b/folderStructure.png\"\n        srcset=\"/static/5bab68a1377714583a83d3f7d384bacd/c26ae/folderStructure.png 158w,\n/static/5bab68a1377714583a83d3f7d384bacd/6bdcf/folderStructure.png 315w,\n/static/5bab68a1377714583a83d3f7d384bacd/08c0b/folderStructure.png 552w\"\n        sizes=\"(max-width: 552px) 100vw, 552px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<deckgo-highlight-code language=\"sh\"  >\n          <code slot=\"code\">npm install -g newman\nnpm install -g newman-reporter-htmlextra\n\nfor collection in ~/Desktop/newman/test/*/*.json\ndo\n   echo $collection\n   newman run $collection \n      -e ~/Desktop/newman/environment/dev1.json # 환경변수 설정\n      -r htmlextra # report로 htmlextra 사용\n      --reporter-htmlextra-export ~/Desktop/newman/report/&quot;$(date &#39;+%Y-%m-%d_%H-%M-%S&#39;)&quot;_$(basename &quot;$collection&quot; .json)&#39;_report&#39;.html \n      # report 경로 셜정 [TIMESTAMP_파일이름_report.html]\ndone</code>\n        </deckgo-highlight-code>\n<hr>\n<h1 id=\"브랜치\" style=\"position:relative;\">브랜치<a href=\"#%EB%B8%8C%EB%9E%9C%EC%B9%98\" aria-label=\"브랜치 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fccaed3cf5a1476e9d8b5d3515f78c4d/7388e/branch.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.49367088607595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42m2Tu3KbQBSGedDUeQzXSZMHyDiNmxQpXKZxCruWM5alRBICJHMRiJsAL/fLnzlHWYwyYWaHw7Ln2/8/Z1cBgFu/wbVTU4hhGHjImJ6u62DoGh7nz/COPoR4xXq9xs/nJdI0g+ce8Pg0h6obUCjhs1Pj48sZKJ8pGG2DeSBwaxeo2p6n7o8l7tyc47Dq8M0qYEQZFMikvkMY+Ijj+EIhp/c1PqglrnZvG75fDfh6PMcPpwHvfgNZUUGRySLPoes6XNdF0zRvKhnY4oed4csmRlvm6KsSN1qC72YCNCXUWODTrxhh+nq2LBOjKGKF0/pBQgEkBwtdf7bcJBHKNB7dpQeTQ6X/u6Cua1iWBd/3LxRKaCYEXiwbRVHw1ME7coP6rkNeFDAdB1VVQVkulzBNk5UFQXChUALbtsVut8N2u4Vt20jTFIZhYL/fs4CyLHkdAz3PgxCCFdJi+paqp0ACEJBcEJDqTXMEzPOc15J6RXaNII7jMPDfcyiBqqqymyRJGEiDgKR0tVqxi7HLBKSmnE6ni7M4BW42m1GhpmkjkPJoEyrXCJRNoWNDN+N/QBqkkDaVNSRH9F/eKGVqj2ogCzxtCqmn+s1mM4ZQzamZi8UCYRiO6uj9BxEgkczNnFvsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"branch\"\n        title=\"\"\n        src=\"/static/fccaed3cf5a1476e9d8b5d3515f78c4d/f058b/branch.png\"\n        srcset=\"/static/fccaed3cf5a1476e9d8b5d3515f78c4d/c26ae/branch.png 158w,\n/static/fccaed3cf5a1476e9d8b5d3515f78c4d/6bdcf/branch.png 315w,\n/static/fccaed3cf5a1476e9d8b5d3515f78c4d/f058b/branch.png 630w,\n/static/fccaed3cf5a1476e9d8b5d3515f78c4d/40601/branch.png 945w,\n/static/fccaed3cf5a1476e9d8b5d3515f78c4d/7388e/branch.png 1104w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>한 서비스에 <code class=\"language-text\">main</code>을 제외한 브랜치는 총 9개가 있고, 테스트 서버도 브랜치에 맞게 9개가 있다.<br>\n<strong>각 브랜치마다 다른 테스트 서버에 다른 이미지가 배포된다.</strong><br>\n서로 다른 이미지를 배포하는 것이 <strong>지속적인 통합/지속적인 배포</strong>라는 의미가 맞을까?</p>\n<ul>\n<li><a href=\"https://blog.hwahae.co.kr/all/tech/9507\"><code class=\"language-text\">화해 기술 블로그</code> 브랜치 전략 수립을 위한 전문가의 조언들</a>\n<ul>\n<li>Git-flow</li>\n<li>Github-flow</li>\n<li>Gitlab-flow</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Jenkins CI/CD 구축하기","date":"March 21, 2023","description":null,"tags":["Lab","CI/CD"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#as-is\">AS-IS</a></p>\n</li>\n<li>\n<p><a href=\"#to-be\">TO-BE</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B8%B0%EC%A4%80-%ED%86%B5%ED%95%A9-%ED%85%8C%EC%8A%A4%ED%8A%B8\">서비스 기준 통합 테스트</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B8%B0%EC%A4%80-%ED%86%B5%ED%95%A9-%ED%85%8C%EC%8A%A4%ED%8A%B8\">인프라 기준 통합 테스트</a></p>\n<ul>\n<li>\n<p><a href=\"#case-1-jenkins--postman--newman\">CASE 1. Jenkins + Postman (+ newman)</a></p>\n<ul>\n<li><a href=\"#%EB%A1%9C%EC%BB%AC%EC%97%90%EC%84%9C-postman-cli-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\"><strong>로컬에서 Postman CLI 사용해보기</strong></a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B8%8C%EB%9E%9C%EC%B9%98\">브랜치</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/2023y02m/javatokotlin/"},"frontmatter":{"title":"자바에서 코틀린으로 모임 회고"}},"next":{"fields":{"slug":"/2023y03m/dbIndex/"},"frontmatter":{"title":"타입이 서로 다른 컬럼을 조인한다면?"}}},"pageContext":{"id":"966e3e8d-72fd-5192-95b7-c75c945b479c","previousPostId":"6cbbb62d-d9cd-5e94-a41b-408e47372011","nextPostId":"94573e35-1c98-500b-aa21-17df9ca6aebe"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}