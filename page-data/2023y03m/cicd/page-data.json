{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023y03m/cicd/","result":{"data":{"site":{"siteMetadata":{"title":"코딩 주머니"}},"markdownRemark":{"id":"966e3e8d-72fd-5192-95b7-c75c945b479c","excerpt":"AS-IS…","html":"<h1 id=\"AS-IS\" style=\"position:relative;\">AS-IS<a href=\"#AS-IS\" aria-label=\"AS IS permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/979c19b8ade772f97c193f1ce3b457ef/34e70/ASIS.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMUlEQVR42n1Ty6rbQAz1JxYK/YLuC4XSr+gfZNd16bZcCHRTSO+iad7OwyF2HCe24/g1M37Gp0iJw00od0AeaSyfczSSNbyymqbhPTyd8Lffx2Q6Q5okOPo+hoMBpjMdaZrCtkz86fexMgxor4G1gEpKdB2Jnp/d3nX3Cj0/59jPKny3FbaRhNZ+2H780j9fdydReDuoMZQXMrcA3o0aDMUl/uY2eK8DqKsHhQ+gHDVnBGGETxOFX14GNBWSvMTHkcDvYw40JZ6POT6MJIRS0MoigwgPUCJmgFZdC0x3VJUlROBha25QVhXKooBrbVDIlGRBJjG87QZlWUIzPYnPXw38HLi3Ms/1GbZ7QCIFcMUXUiFNxY1s7+zgxBl6O8mEru/zubZLgDcd4GlSXQEvGL1hH14Y3HW7XSrLUagUz0aMLz8stKz01ChXNwNkRc2HJDuiElSMtFB8JqWE53lsSikIIeD7PnzPQxKnHJMlSQJNpCmW8+mNZbPZ8NzdKAEcj0eMx2PMZjMGdRyH4+VyicPhgKq6VEdk3OUwirks27Y5IY5jtrbUIAiYyDRNBqcc8i3LwsF1OZeqoDwG7Ha7HOR5fndn7U4g8/kci8WC/f1+z7FhGKx2vV5D13V+r5HMTqfDbNyU8xmPw05kBEDWKiR/tVqxT+rqukYURfeD/fi3vFRI90cq2jukmBQRIIHRyrLs8uu1qvCfwaZ1Op24AWSk1nVd9qlU6jYNP3U5DEP8A0F7KUXxSHFsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ASIS\"\n        title=\"\"\n        src=\"/static/979c19b8ade772f97c193f1ce3b457ef/f058b/ASIS.png\"\n        srcset=\"/static/979c19b8ade772f97c193f1ce3b457ef/c26ae/ASIS.png 158w,\n/static/979c19b8ade772f97c193f1ce3b457ef/6bdcf/ASIS.png 315w,\n/static/979c19b8ade772f97c193f1ce3b457ef/f058b/ASIS.png 630w,\n/static/979c19b8ade772f97c193f1ce3b457ef/40601/ASIS.png 945w,\n/static/979c19b8ade772f97c193f1ce3b457ef/34e70/ASIS.png 1053w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>현재 모두 수동으로 반영하고 있다.<br>\n<code class=\"language-text\">Bitbucket</code>은 형상관리 역할만 하기에 커밋 내용과 <code class=\"language-text\">Nexus</code>의 도커 이미지가 동일하다는 것이 보장되지 않는다.<br>\n<code class=\"language-text\">Nexus</code>에 이미지를 넣기 위해 쉘 스크립트를 직접 실행시켜줘야 한다.<br>\n그리고 이미지에 태깅할 이름을 직접 작성하기에 잘 못 작성할 여지가 있다.</p>\n<p>위의 문제를 해결하기 위해 아래와 같은 CI/CD를 구축해보려 한다.</p>\n<h1 id=\"TO-BE\" style=\"position:relative;\">TO-BE<a href=\"#TO-BE\" aria-label=\"TO BE permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be7e74e866b7240098a3e92d8af4b26f/7bf07/TOBE.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.72151898734178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACq0lEQVR42lWSSa/jRBSF/Rv5AfwAxAYJqVmzQWLDCsGuFyCEBFIzCFaoJRZsEFLCo5O8JI6H5Dm24yG2Y5eHsutDVQl5TUlXdWs6de65x1JFhspiVB5DkdIEPu5iBueEMY2YTkca3+bNcsnD8pGiKMizjPnfDzxudzRNw87eMn+zxPE8LG5D3eb0UvHXasEIdHKkaTvEk8frsOF1JMydYVL89NQwzzuznmUdv0YDwTHEmjTYNKHUZA7PTYWfHHl7qPjAuw8DP6bXddzDOw+K9RWfj52JT59AnpNnhtN0BRSNIE0y6ktNlufIoYck4KVd8tv+DL3gXAs+W2SssxqGll/8gm+cEllXWFEU0IrmzqaoCvbuilEppJRMowStc1ORRwHT7V4VHmDsTd7kCd35St967+sz+zAnDA6UteDPb7/i+08+JF6truVKaRrUjxNdP1w1lCPpKeYPr+TVPxnT0FM11/qtFz9I8qImCo/0fc/P373io/c/IHacqxRSovKTaZpSykTbdYx9y9wt+H2RmZbKcWQcR6xjGDDKga67dkyXlBUlw+2CHpeDy+HpCd/3yfPchM6T+Ii4FNRNgxCCuq6x4jQzXqqq6t6YVgjCMLx/UrhbHNdlu92SJAlxHLPZbPA8z6y11pq5xrEc3783RG/o0Az0jzpHKUp/h73bsVqtOJ1OJpbLJa7rEkaR+TyKIvOR9fkXXxof6vI05f900iHalnEYKD0bx/XYbjbm0dsMNVAQBCY0W6vte5TWaxjoxM2pN5P3RvyOyt+xXD0yn8/vgLPZjPV6TZqmzx4W4tnYWv5LL5HaFmDmWk5mv9w7uJ6Hbdv3knVuGpMkRuthGLhcLlgqcFAHG7W3ae3F/2O3RHlrxqPPpRGURWEeanuVZWkAdEM0YNu25uxfFtcgp7xNlu4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TOBE\"\n        title=\"\"\n        src=\"/static/be7e74e866b7240098a3e92d8af4b26f/f058b/TOBE.png\"\n        srcset=\"/static/be7e74e866b7240098a3e92d8af4b26f/c26ae/TOBE.png 158w,\n/static/be7e74e866b7240098a3e92d8af4b26f/6bdcf/TOBE.png 315w,\n/static/be7e74e866b7240098a3e92d8af4b26f/f058b/TOBE.png 630w,\n/static/be7e74e866b7240098a3e92d8af4b26f/40601/TOBE.png 945w,\n/static/be7e74e866b7240098a3e92d8af4b26f/7bf07/TOBE.png 1128w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">Jenkins</code>가 Webhook을 받아 테스트를 실행하고 이미지를 빌드하여 푸시할 예정이다.<br>\n테스트는 <strong>통합 테스트를 실행할 서버와 서비스 서버를 분리</strong>한 상태에서 진행되어야 한다.<br>\n테스트 상황별(Hotfix Test, Integration Test 등)로 테스트 코드를 관리하기 위해 <code class=\"language-text\">Gradle Task</code>를 각각 선언하여 경로별로 관리하려 하였지만 서버에 테스트 코드가 같이 존재하면 커밋이 복잡해져 분리하자는 요구사항이 있었다.</p>\n<p>현재 Webhook을 <code class=\"language-text\">Jenkins</code>가 전달받아 <code class=\"language-text\">Gradle Test Task</code>를 실행하고 빌드하는 것 까지는 완료한 상태다.<br>\n이제 서비스를 젠킨스 내부에서 띄우고 통합 테스트를 실행할 서버가 필요하다.<br>\n<a href=\"https://www.npmjs.com/package/start-server-and-test\"><code class=\"language-text\">npm</code> start-server-and-test</a>를 사용하여 테스트해보자</p>","frontmatter":{"title":"Jenkins CI/CD 구축하기","date":"March 21, 2023","description":null,"tags":["Lab","CI/CD"]},"tableOfContents":"<ul>\n<li><a href=\"#as-is\">AS-IS</a></li>\n<li><a href=\"#to-be\">TO-BE</a></li>\n</ul>"},"previous":{"fields":{"slug":"/2023y02m/javatokotlin/"},"frontmatter":{"title":"자바에서 코틀린으로 모임 회고"}},"next":null},"pageContext":{"id":"966e3e8d-72fd-5192-95b7-c75c945b479c","previousPostId":"6cbbb62d-d9cd-5e94-a41b-408e47372011","nextPostId":null}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}