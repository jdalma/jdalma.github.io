{"componentChunkName":"component---src-templates-blog-post-js","path":"/2024y/polymorphism/","result":{"data":{"site":{"siteMetadata":{"title":"코딩 주머니"}},"markdownRemark":{"id":"57ed670b-72c1-5c05-aaa0-b691a4c0e34c","excerpt":"…","html":"<blockquote>\n<p>이 글의 내용은 <a href=\"https://www.yes24.com/Product/Goods/122890814\">타입으로 견고하게 다형성으로 유연하게</a> 책을 참고하여 작성하였습니다.</p>\n</blockquote>\n<p>이 글을 통해</p>\n<ol>\n<li><strong>타입</strong></li>\n<li>여러 종류의 <strong>다형성</strong>과 <strong>가변성</strong></li>\n<li><strong>제네릭 가변성</strong></li>\n</ol>\n<p>대해 알아보자. 자연스럽게 타입 검사기와 더 친해질 수 있을 것이다.<br>\n(예제 코드는 기본적으로 코틀린을 사용하지만 코틀린에 제공되지 않는 기능들은 첫 줄에 사용한 언어를 표시해놓았다.)</p>\n<h1 id=\"다형성\" style=\"position:relative;\">다형성<a href=\"#%EB%8B%A4%ED%98%95%EC%84%B1\" aria-label=\"다형성 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<p>다형성은 프로그램의 <strong>한 개체</strong>가 여러 타입에 속하도록 만드는 것이다.<br>\n개체는 값, 함수, 클래스, 메서드 등 여러 가지가 될 수 있다.</p>\n<p>하나의 값이 여러 타입에 속할 수도 있고, 한 함수를 여러 타입의 함수로 사용할 수도 있는 것이다.<br>\n<strong>다형성은 거의 모든 정적 타입 언어에서만 발견할 수 있는 매우 널리 사용되는 개념이다.</strong><br>\n<code class=\"language-text\">\"어떤 개체에 다형성을 부여하는지\"</code> , <code class=\"language-text\">\"어떻게 다형성을 부여하는지\"</code> 를 이해하는 것이 중요하다.</p>\n<h2 id=\"서브타입에-의한-다형성\" style=\"position:relative;\">서브타입에 의한 다형성<a href=\"#%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85%EC%97%90-%EC%9D%98%ED%95%9C-%EB%8B%A4%ED%98%95%EC%84%B1\" aria-label=\"서브타입에 의한 다형성 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>이 주제는 객체를 다룰 때 유용하며 <strong>서브타입</strong> 이라는 개념을 통해 다형성을 실현한다.<br>\n서브타입은 타입 사이의 관계이며, <code class=\"language-text\">\"A는 B이다.\"</code> 라는 설명이 올바르다면 <code class=\"language-text\">A는 B의 서브타입</code> , <code class=\"language-text\">B는 A의 슈퍼타입</code>이다.<br>\n반대로 <code class=\"language-text\">\"B는 A이다.\"</code>는 성립하지 않는다.</p>\n<p>A는 B의 서브타입일 때 B 타입의 부품을 A 타입의 부품으로도 간주할 수 있게 하는 기능이 서브타입에 의한 다형성이다.<br>\n즉, <strong>슈퍼타입이 요구되는 자리에 서브타입이 위치하더라도 타입 검사기가 문제삼지 않는다는 것이다.</strong><br>\n타입 검사기가 객체 타입의 서브타입 관계를 판단할 때 <strong>이름에 의한 서브타입</strong>과 <strong>구조에 의한 서브타입</strong>이 존재한다.</p>\n<h3 id=\"이름에-의한-서브타입\" style=\"position:relative;\">이름에 의한 서브타입<a href=\"#%EC%9D%B4%EB%A6%84%EC%97%90-%EC%9D%98%ED%95%9C-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\" aria-label=\"이름에 의한 서브타입 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 451px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab487c944bf8a83a56f771c3d2cfa5c7/38070/subtype.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACKElEQVR42lWTSY/TQBCF/f+Pc+AGB8SVXEAgoaBwgMlCRrNAEme1J453OxnHieO1H9Vle5ix9NRlu/vrV13VCugRAs0jUFZAdBGwI4GNW0A1M0x2KaYk1cqwcjIYQY7gWCDNK17zkqG0QZqXsA4Frv+Y+PVgYTBxMNkmWLrA3BEkQG00swSmVomFncPc58gYXEMVGRyTAnPafeEKfP5xjw+dLt53ehhMfWh+Ac0OsXNsmK7J46MTYmUnUO2SwGCwZLDD86WkVHLM6efCKaGFlOoeMMMTonCJ/DCmMxjRrlLDZhzx96dghkc3IDBlQAzJUjQv550kTGpGqdiOjurQbwBjiOj3C9Xv8jviIcUD+N6G12l+DmW6y7BkGBWAzmrr+DyJQcebemFyC1zuSXe1krvmP/3jOX1YnkXFK18DZzYQ+Et2JqKbZ3dfO1fofnqDLx+v8PPbW1x33yEPadP4hh0jHuEpVPHXIIe6X6e8ZIeA5Rq8o3RXOxjjYPQQ6F2E+nfstz1+b9OupMO4D8fdYO2Rw3P6uihcsWDCkxA3KZ1v6zSlZCzVHsdpgFP4gLl5xjmt2rapQapVELTi2PN0qqRcRKlFjY6thjwWVGnXXWFhJcQQ3ORKe0myouImlbAZgSfUvHKi4bgIAw3H/QJRMMXeVwmyxta2sbRiGGGFtGhuC5rGfr55fGMqhHFBE3Nqg5Idj9cpxpuUYkHnJKAHFbyjIND/dS3jH61mgkoOmwTNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"subtype\"\n        title=\"\"\n        src=\"/static/ab487c944bf8a83a56f771c3d2cfa5c7/38070/subtype.png\"\n        srcset=\"/static/ab487c944bf8a83a56f771c3d2cfa5c7/3684f/subtype.png 225w,\n/static/ab487c944bf8a83a56f771c3d2cfa5c7/fc2a6/subtype.png 450w,\n/static/ab487c944bf8a83a56f771c3d2cfa5c7/38070/subtype.png 451w\"\n        sizes=\"(max-width: 451px) 100vw, 451px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클래스의 이름과 클래스 사이의 상속 관계만 고려한다.</p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">open class Person(val name: String)\nclass Marathoner(name: String): Person(name)</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun run(person: Person) {\n    TODO()\n}\n\nrun(Person(...))\nrun(Marathoner(...))</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun run(marathoner: Marathoner) {\n    TODO()\n}\n\nrun(Person(name))       // 컴파일 에러\nrun(Marathoner(name))</code>\n        </deckgo-highlight-code>\n<h3 id=\"구조에-의한-서브타입\" style=\"position:relative;\">구조에 의한 서브타입<a href=\"#%EA%B5%AC%EC%A1%B0%EC%97%90-%EC%9D%98%ED%95%9C-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\" aria-label=\"구조에 의한 서브타입 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 571px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73c335250124c6fa96c65e567cdefe5a/17d73/subtype2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRElEQVR42hWQTU/CUBBF+fWuMXGlCe7cKOrGEKOiAgqtgohIDbS0lUD5aqWlhAJ97/hYzN3NmXMnI4TEjwVOIPm0I5rOiq/fNdY0xQtTkp0E9qNSJIi1S/L3wcavsguqbAOdNGojkzFSCjKDYEfHXmI7Swq3NXLHZxTudCw75MeOMS2fJIwhmpGOKuBXaBdzPF0fUbo45LVwQuw9w1IjjbtkOp5QywGubtDrzrl/qFN/62EPVvTNgB9zwWwUKpCBHBZhD51UGDXyvCro8P0c1p/qYB2xqCrD+Zae1sXseOjlL6ovbcp3Gs2Gg2nMsAyPZOrD1EUMlEm/wM69R7vIcnN6gJbPIiclBawh9oZCSqKuxdAN0GsGj08tHot1jJbDfByxmSvYSlVeLJDhTNl9sxm8MG5eMmmeM2xcsfXeYTtRP075B18/aNmhU6BxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"subtype2\"\n        title=\"\"\n        src=\"/static/73c335250124c6fa96c65e567cdefe5a/17d73/subtype2.png\"\n        srcset=\"/static/73c335250124c6fa96c65e567cdefe5a/3684f/subtype2.png 225w,\n/static/73c335250124c6fa96c65e567cdefe5a/fc2a6/subtype2.png 450w,\n/static/73c335250124c6fa96c65e567cdefe5a/17d73/subtype2.png 571w\"\n        sizes=\"(max-width: 571px) 100vw, 571px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>만약 Person과 Marathoner라는 콘크리트 클래스가 서로 관계가 맺어져 있지 않고 다른 라이브러리에 존재한다고 가정하면 함수를 같이 사용할 수 없게된다.<br>\n이 문제를 <strong>구조를 드러내는 타입</strong>을 사용하여 <code class=\"language-text\">\"A가 B에 정의된 필드와 메서드를 모두 정의한다면 A는 B의 서브타입이다.\"</code> 라는 규칙을 적용하게 하여 해결할 수 있다.</p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">// scala\nclass Person(val name: String) {\n  def greeting(word: String): Unit = {\n    println(word)\n  }\n}\nclass Marathoner(val name: String, val awards: List[String]) {\n  def greeting(word: String): Unit = {\n    println(word)\n  }\n}\n\n// 필드 구조를 드러내어 다형성을 해결\ndef run(person: { val name: String }): Unit = {\n   // person.name\n}\n\nrun(new Person(name))\nrun(new Marathoner(name, null))\n\n// 메서드 구조를 드러내어 다형성을 해결\ndef _greeting(person: { def greeting(word: String): Unit }, word: String): Unit = {\n   person.greeting(word)\n}\n\n_greeting(new Person(name), &quot;hello&quot;)\n_greeting(new Marathoner(name, null), &quot;hi&quot;)</code>\n        </deckgo-highlight-code>\n<p>언어가 구조에 의한 서브타입을 제공하면 추상 메서드를 대체할 수 있기 때문에 추상 메서드의 필요성이 줄어든다.</p>\n<h3 id=\"집합론적-서브타입\" style=\"position:relative;\">집합론적 서브타입<a href=\"#%EC%A7%91%ED%95%A9%EB%A1%A0%EC%A0%81-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\" aria-label=\"집합론적 서브타입 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<blockquote>\n<p>타입은 프로그램에 존재하는 값들을 그 능력에 따라 분류한 것이다. 여기서 값은 변수에 저장되거나 함수에서 반환될 수 있는 모든 것들을 말한다.</p>\n</blockquote>\n<h3>최대 타입 (전체 집합, top type)</h3>\n<p><strong><code class=\"language-text\">\"아무 값이나 가능하다\"</code>는 사실을 타입으로 표현하기 위함이다.</strong><br>\n가장 큰 타입이며 모든 값을 포함하는 타입이다.<br>\n이 정의에 따라 <strong>모든 타입은 최대 타입의 서브타입이며, 최대 타입은 모든 타입의 슈퍼타입이다.</strong></p>\n<p>자바에서는 <code class=\"language-text\">Object</code>, 코틀린에서는 <code class=\"language-text\">Any?</code>를 의미한다.</p>\n<h3>최소 타입 (공집합, bottom type)</h3>\n<p>예외가 발생하여 실행이 즉시 끝나는 경우, 타입 검사를 통과한 프로그램이더라도 예외가 발생해 실행이 갑작스럽게 중단되는 경우를 다루기 위함이다.</p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun error() {\n    throw RuntimeException()\n}\n\nfun assertEquals(num1: Int, num2: Int) : Boolean = \n   if (num1 == num2) true else error() // 컴파일 에러</code>\n        </deckgo-highlight-code>\n<p>위의 <code class=\"language-text\">assertEquals</code>는 정상적인 경우 <code class=\"language-text\">true</code>를 반환하므로 <code class=\"language-text\">Boolean</code>을 반환하는 것이 합당해 보일 수 있지만 컴파일 에러가 발생한다.</p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun error(): Boolean {\n    throw RuntimeException()\n}\n\nfun assertEquals(num1: Int, num2: Int) : Boolean = \n    if (num1 == num2) true else error()\n\nfun assertEqualsYesOrThrowException(num1: Int, num2: Int) : String = \n    if (num1 == num2) &quot;Y&quot; else error()    // 컴파일 에러</code>\n        </deckgo-highlight-code>\n<p><code class=\"language-text\">error()</code> 함수를 <code class=\"language-text\">Boolean</code>을 반환하도록 수정하면 컴파일을 완료할 수 있다.<br>\n하지만 <code class=\"language-text\">error()</code> 함수가 다른 타입에서도 사용되어야 한다면 그 타입에 맞는 타입을 반환하는 함수가 계속 추가되어야 한다.</p>\n<p>error() 함수는 <strong>값을 반환하지 못한 채 예외가 발생하는 함수</strong>이므로 어디서든 사용할 수 있도록 하는 것이 맞다.<br>\n이때 <strong><code class=\"language-text\">\"계산을 끝마치지 못한다\"</code>를 표현하기 위한 타입, 어떤 값도 속하지 않는 타입이 최소 타입을 사용할 수 있다.</strong></p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun error(): Nothing {\n    throw RuntimeException()\n}\n\nfun assertEquals(num1: Int, num2: Int) : Boolean =\n    if (num1 == num2) true else error()\nfun assertEqualsYesOrThrowException(num1: Int, num2: Int) : String =\n    if (num1 == num2) &quot;Y&quot; else error()</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://github.com/jdalma/footprints/tree/main/%EC%BD%94%ED%8B%80%EB%A6%B0#%EB%84%90-%EA%B0%80%EB%8A%A5%EC%84%B1%EC%97%90-%EB%8C%80%ED%95%9C-%EC%8A%A4%EB%A7%88%ED%8A%B8-%EC%BA%90%EC%8A%A4%ED%8A%B8%EC%99%80-nothing-%ED%83%80%EC%9E%85\">Kotlin의 Nothing</a>을 사용하여 예외를 던지는 함수를 어디서든 호출할 수 있도록 하여 문제를 해결할 수 있다.<br>\n<strong>최대 타입이 \"아무 값이나 될 수 있다.\"를 의미한다면 최소 타입은 \"아무 곳에나 사용될 수 있다.\"를 의미한다.</strong></p>\n<h3>이거나 타입 (합집합, union type)</h3>\n<p>한 함수가 받는 인자 타입이 여러 가지가 되어야 하는 경우 유용하게 사용할 수 있는 타입이다.</p>\n<deckgo-highlight-code language=\"typescript\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">// typescript\nfunction write(data: string | number): void {\n    if (typeof data === &quot;string&quot;) {\n        let str: string = data;\n        // ...\n    } else {\n        let num: number = data;\n        // ...\n    }\n}\n\nwrite(1)\nwrite(&quot;abcd&quot;)</code>\n        </deckgo-highlight-code>\n<h3>이면서 타입 (교집합, intersection type)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 476px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a31fce48b48f12a00340d2c7fc9b87e6/f2205/intersection.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVR42n2Sa3OaUBCG/f9/pf3QtEkn07SNycR+iE2qUVEEhrugCN6IoFyeHjAxTSftzrzs4TDz7LvLNnpawL2k8yDbSJqH4a0way3/0uoo218j6XPmyy1VlEUpHgc1HpQp3ftbWjfXDKU+eZ7zvyifcpzs0QS8vitfvjdkK6oPhahS3RdJSmqqPGodoS6x2iExJBLHIewrhAOFSFLwOjJWT6Gc+WS+R+5NyH2fxvgILOqcTT1W6hW7lUEaaaQLk8dpG7s/wFNnhE5A5ITYQwdj5Ap7OUWaCpclmW1VwMUr4N63iO02VeNZntWudxsTs98jTctj0+l2h28GLzMUUblsjO3XwJ1nkfodhmOFiy/nXF232EQq8l2b88/faDYvOTs75fvXS1zNfwIWL8CRGb3psKqZpgm7TGTh0Br0SbYZ+yxlv0+J1zG+/obDnjY/gPY5WQXxXRZ6i+02JIkDdtslm3kPXcxwNtmwFquyWSU4AjYxDsBCbEaFzCqgG2xQnSX6ZInmx1gjE01WGcgPSKMug+EvZHWMIjpp3xm0fxrctnW6XZs8K/hzb2qHh/eynkNdZTaliON/7t9zJOLPaoaOK1bFcV1mqxVrTaVRPm/lc5UwJHMd8kUozsFRRTgnn8/JgoAyilgaBhfv39E8+cDN6SeaH0+wfrT4DfWnPeKOHHiFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"intersection\"\n        title=\"\"\n        src=\"/static/a31fce48b48f12a00340d2c7fc9b87e6/f2205/intersection.png\"\n        srcset=\"/static/a31fce48b48f12a00340d2c7fc9b87e6/3684f/intersection.png 225w,\n/static/a31fce48b48f12a00340d2c7fc9b87e6/fc2a6/intersection.png 450w,\n/static/a31fce48b48f12a00340d2c7fc9b87e6/f2205/intersection.png 476w\"\n        sizes=\"(max-width: 476px) 100vw, 476px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>다중 상속을 다룰 때 유용하다. 위의 그림과 같이 어떤 함수를 <code class=\"language-text\">Trainer</code>와 <code class=\"language-text\">Developer</code>를 동시에 인자로 받도록 지정하고 싶을 때 편리하게 사용할 수 있다.</p>\n<deckgo-highlight-code language=\"typescript\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">// typescript\ninterface Person {\n  name: string;\n}\ninterface Marathoner {\n  awards: string[];\n}\nclass Trainer implements Person, Marathoner {\n    awards: string[]=[];\n    name!: string;\n}\nclass Developer implements Person, Marathoner {\n    awards: string[]=[];\n    name!: string;\n}\n\nfunction getName(person: Trainer &amp; Developer): String {\n    return person.name;\n}</code>\n        </deckgo-highlight-code>\n<h3 id=\"함수와-서브타입\" style=\"position:relative;\">함수와 서브타입<a href=\"#%ED%95%A8%EC%88%98%EC%99%80-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\" aria-label=\"함수와 서브타입 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>언어가 함수를 값으로 사용할 수 있는 일급 함수를 지원하고 객체와 서브타입에 의한 다형성이 존재하면 <strong>함수 타입 사이의 서브타입 관계를 따질 필요가 생긴다.</strong></p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">open class Person\nclass Marathoner : Person()\n\nval selectBySupertype: (Person) -&gt; Marathoner = TODO()\nval selectBySubtype: (Marathoner) -&gt; Marathoner = TODO()\n\nfun select(selector: (Marathoner) -&gt; Person) {\n   val person = selector(Marathoner())\n   TODO()\n}\n\n@Test\nfun call() {\n   select(selectBySupertype)\n   select(selectBySubtype)\n}</code>\n        </deckgo-highlight-code>\n<p>이전에 배운 <code class=\"language-text\">\"A는 B이다.\"</code>에 입각하여 위의 예제를 보면 <code class=\"language-text\">(Person) -> Boolean</code>은 <code class=\"language-text\">(Marathoner) -> Boolean</code>의 서브타입이다.<br>\n<strong>\"사람을 인자로 받을 수 있는 함수는 마라토너를 인자로 받을 수 있는 함수다.\"</strong> 가 성립되기 때문이다.</p>\n<p>하지만 그 반대인 <code class=\"language-text\">(Marathoner) -> Boolean</code>은 <code class=\"language-text\">(Person) -> Boolean</code>의 서브타입이 아니다.<br>\n<strong>\"마라토너를 인자로 받을 수 있는 함수는 사람을 인자로 받을 수 있는 함수다.\"</strong> 가 성립되지 않기 때문이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 796px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b8fd32776c679261a601b162ffd247e4/d48f1/functionSubtype.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6UlEQVR42p1U25KbOhD0jywgCQlxR1wMGHvt7Fad85L//51OS/iyyUMqyUPXGIFHPT09c+jrGpW1aFuHVFu8RQJRLP8Zh0xnSI2FzgporUPCkNTHf0lYMFlrHXJTIi8KWJszNihsBpOqv2Z8mJsW7+6KS3dF13ZYlhnODTgeF/RdhabMEP9NQp2SibQwykJJzbItJGPK8zQ1RLrLwI/fYvGUZJdFBuzv928OxuSITB0QmwYJNY1TgUSl1DZH7C8xBZRgFCZcaDKLLCsheJnIFKUxgZSSKQ5dVSErHbrxhKZf4KYZ8+mE47JhY/zvcsVtu6J1DpnRSJIUUmkiQyIVL1SsiGfCv1M49HUFm9cYJ2o2TBiPK97fP7BdvuF82vBtvOA6XDGOM4q2eDbp2azoLsWjZMGSYj4kQvEGGRgIf5tIA+KI5/H+O0rkFw0f+r0ShqZYWyCxHUTRQ+YO0moIrejLHIra2LzC3jg2ifDfZ7aE0gbCUj9GK3NoEgsJh6aGrRzG+Qw3rpjmleXSRjeWPbF8d8PRrXCDg1I7U19VYE/9BCsTrMrrFxK2RRludP2Epu0Zj1jWM9bThYkmLPUJYzWzYT1Z0ehve4kPywQ97wgJE0/1PmpR/OtUiJf4ifx5aqKvDfli7KqsocoRupmhqxGm5kxzOsq6Q1U1qKuWY1ij0DxPLceypA8LyExD5Sksz2zKZ5Yeujxw2xTUsKdeAzGvGy7XD5zfb/i83fD9839sywUdNZRSIqZWHp6xRxyrgCfD0rve+sVQo24chnFBR+2O/Ygzm7G2R2rbIc30yy6/m2UhDW9SO+KXp+K7TnH0YHWPjz8Hdi88E7Z1A0P9Mreh7GdUPZl2LdqmR1l2aMi6NN5n1Cr3662CNIZ+VfC7NFcF/Zm+utxxBxZlGyzjy93ON4Ljdjrjc/vAxLOqq+k7eS/3NXLRF7u8Fmzmt0cZJqKsuqBfy324dhN35IyhGZBzgXgD/8k+/AFhGEPuNY5zJQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"functionSubtype\"\n        title=\"\"\n        src=\"/static/b8fd32776c679261a601b162ffd247e4/d48f1/functionSubtype.png\"\n        srcset=\"/static/b8fd32776c679261a601b162ffd247e4/3684f/functionSubtype.png 225w,\n/static/b8fd32776c679261a601b162ffd247e4/fc2a6/functionSubtype.png 450w,\n/static/b8fd32776c679261a601b162ffd247e4/d48f1/functionSubtype.png 796w\"\n        sizes=\"(max-width: 796px) 100vw, 796px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">람다 \\ 함수 인자</th>\n<th align=\"center\">selectSuperToSuper</th>\n<th align=\"center\">selectSubToSuper</th>\n<th align=\"center\">selectSuperToSub</th>\n<th align=\"center\">selectSubToSub</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code class=\"language-text\">(Sub) -> Sub</code></td>\n<td align=\"center\">❌</td>\n<td align=\"center\">O</td>\n<td align=\"center\">❌</td>\n<td align=\"center\">O</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">(Sub) -> Super</code></td>\n<td align=\"center\">❌</td>\n<td align=\"center\">O</td>\n<td align=\"center\">❌</td>\n<td align=\"center\">❌</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">(Super) -> Super</code></td>\n<td align=\"center\">O</td>\n<td align=\"center\">O</td>\n<td align=\"center\">❌</td>\n<td align=\"center\">❌</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">(Super) -> Sub</code></td>\n<td align=\"center\">O</td>\n<td align=\"center\">O</td>\n<td align=\"center\">O</td>\n<td align=\"center\">O</td>\n</tr>\n</tbody>\n</table>\n<p>즉, A가 B의 서브타입일 떄 <code class=\"language-text\">B -> C</code>가 <code class=\"language-text\">A -> C</code>의 서브타입이며 그 반대는 성립하지 않는다.<br>\n따라서 <strong>함수 타입은 매개변수 타입의 서브타입 관계를 뒤집는다.</strong><br>\n결과 타입의 서브타입 관계가 유지된다는 사실은 나름 직관적인것에 비해, 매개변수 타입의 서브타입 관계가 뒤집히는게 이상할 수 있지만 논리적으로 타당하다.</p>\n<p><code class=\"language-text\">selectSubToSuper</code>의 함수는 4가지의 람다를 모두 허용하는 이유가 <strong>\"함수 타입은 매개변수 타입의 서브타입 관계를 뒤집고 결과 타입의 서브타입 관계는 유지하기 때문이다.\"</strong> ⭐️</p>\n<h2 id=\"매개변수에-의한-다형성\" style=\"position:relative;\">매개변수에 의한 다형성<a href=\"#%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98%EC%97%90-%EC%9D%98%ED%95%9C-%EB%8B%A4%ED%98%95%EC%84%B1\" aria-label=\"매개변수에 의한 다형성 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>매개변수에 의한 다형성은 <strong>타입 매개변수를 통해 다형성을 만드는 기능으로, 제네릭스라고도 부른다.</strong></p>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun &lt;T&gt; choose(v1: T, v2: T): T {\n   println(v1)\n   println(v2)\n   return if(readln() == &quot;Y&quot;) v1 else v2\n}</code>\n        </deckgo-highlight-code>\n<p><code class=\"language-text\">T</code>를 매개변수 타입 표시와 결과 타입 표시에 사용했다. 이와 같이 한 개 이상의 타입 매개변수를 가지는 함수를 <strong>제네릭 함수</strong> 라고 부른다.<br>\n타입 매개변수를 추가할 수 있는 곳은 함수뿐이 아니라 타입에 타입 매개변수를 추가하여 <strong>제네릭 타입</strong> 을 지정할 수 있고,<br>\n타입 매개변수를 가진 클래스를 정의하여 <strong>제네릭 클래스</strong> 도 만들 수 있다.</p>\n<p>하지만 제네릭 <code class=\"language-text\">T</code>가 아무 타입이나 될 수 있기 때문에 특정 타입에서 제공하는 기능을 사용할 수 없다.<br>\n<strong>타입 매개변수로 지정된 타입은 함수 또는 클래스 안에서 특정 능력이 필요한 자리에 사용된다면 제네릭으로 선언할 필요가 없다.</strong></p>\n<h3 id=\"무엇이든-타입\" style=\"position:relative;\">무엇이든 타입<a href=\"#%EB%AC%B4%EC%97%87%EC%9D%B4%EB%93%A0-%ED%83%80%EC%9E%85\" aria-label=\"무엇이든 타입 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<deckgo-highlight-code language=\"kotlin\" terminal=\"carbon\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">fun &lt;T&gt; first(list: List&lt;T&gt;): T = list.first()\nfun &lt;T&gt; last(list: List&lt;T&gt;): T = list.last()\n\nfun &lt;T&gt; compute(selector: (List&lt;T&gt;) -&gt; T) {\n   selector(listOf(1,2,3))\n   selector(listOf(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;))\n}\n\n@Test\nfun task() {\n   compute&lt;Int&gt;(::first)\n   compute&lt;String&gt;(::last)\n}</code>\n        </deckgo-highlight-code>\n<p><code class=\"language-text\">simulate</code> 함수 안에서 selector의 타입이 2가지가 동시에 존재하기 때문에 컴파일 에러가 발생한다.<br>\n타입 검사기가 <code class=\"language-text\">simulate</code>의 <code class=\"language-text\">T</code>가 무엇인지 알 수 없는 이와 같은 상황을 해결할 수 있는 방법은 무엇일까?<br>\n(simulate에 list를 파라미터로 추가하면 되지만.. 2가지 타입이 동시에 존재하는 상황에 집중해보자)</p>\n<p>이때 <strong>무엇이든 타입</strong> 을 사용할 수 있다.</p>\n<ol>\n<li>제네릭</li>\n<li>오버로딩에 의한 다형성</li>\n<li>오버라이딩에 의한 다형성</li>\n</ol>","frontmatter":{"title":"다형성과 가변성에 대해","date":"February 11, 2024","description":null,"tags":["다형성"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%8B%A4%ED%98%95%EC%84%B1\">다형성</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85%EC%97%90-%EC%9D%98%ED%95%9C-%EB%8B%A4%ED%98%95%EC%84%B1\">서브타입에 의한 다형성</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EB%A6%84%EC%97%90-%EC%9D%98%ED%95%9C-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\">이름에 의한 서브타입</a></li>\n<li><a href=\"#%EA%B5%AC%EC%A1%B0%EC%97%90-%EC%9D%98%ED%95%9C-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\">구조에 의한 서브타입</a></li>\n<li><a href=\"#%EC%A7%91%ED%95%A9%EB%A1%A0%EC%A0%81-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\">집합론적 서브타입</a></li>\n<li><a href=\"#%ED%95%A8%EC%88%98%EC%99%80-%EC%84%9C%EB%B8%8C%ED%83%80%EC%9E%85\">함수와 서브타입</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98%EC%97%90-%EC%9D%98%ED%95%9C-%EB%8B%A4%ED%98%95%EC%84%B1\">매개변수에 의한 다형성</a></p>\n<ul>\n<li><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%B4%EB%93%A0-%ED%83%80%EC%9E%85\">무엇이든 타입</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/2023y/retrospect/"},"frontmatter":{"title":"2023년 회고"}},"next":{"fields":{"slug":"/2024y/transaction/"},"frontmatter":{"title":"트랜잭션과 잠금"}}},"pageContext":{"id":"57ed670b-72c1-5c05-aaa0-b691a4c0e34c","previousPostId":"a81d0024-a600-58f9-9a17-cfc08d50ca78","nextPostId":"099bd161-b615-5200-ab96-c2a0d6a8dfa3"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}