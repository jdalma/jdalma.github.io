---
layout: default
title: ë¹ˆ ìƒëª…ì£¼ê¸°
parent: ğŸŒ± ìŠ¤í”„ë§
nav_order: 7
---
## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}
---

## **ë¹ˆ ìƒëª…ì£¼ê¸°**
- **ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜ , ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³  , ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰ í•˜ë ¤ë©´** , <span style="color:red; font-weight:bold">ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.</span>
- ì´ëŸ¬í•œ ì´ˆê¸°í™” ì‘ì—…ê³¼ ì¢…ë£Œ ì‘ì—…ì„ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ì§€ ì˜ˆì œë¡œ ì•Œì•„ë³´ì

ìŠ¤í”„ë§ì€ ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒê³¼ ê°™ì€ ë¼ì´í”„ ì‚¬ì´í´ì„ ê±°ì¹œë‹¤.
- **"ê°ì²´ ìƒì„±" â†’ "ì˜ì¡´ê´€ê³„ ì£¼ì…" (ìƒì„±ì ì£¼ì…ì€ ì˜ˆì™¸)**

ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  , ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë‹¤ ëë‚œ ë‹¤ìŒì—ì•¼ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë£Œëœë‹¤.

**ìŠ¤í”„ë§ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´**<span style="color:red; font-weight:bold"> ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥</span>ì„ ì œê³µí•œë‹¤.

ë˜í•œ **ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì—** <span style="color:red; font-weight:bold">ì†Œë©¸ ì½œë°±</span>ì„ í•´ì¤€ë‹¤.



### ğŸ“Œ **ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ ì‚¬ì´í´**
> 1. "ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±"
> 1. "ìŠ¤í”„ë§ ë¹ˆ ìƒì„±"
> 1. "ì˜ì¡´ê´€ê³„ ì£¼ì…"
> 1. "ì´ˆê¸°í™” ì½œë°±"
> 1. "ì‚¬ìš©"
> 1. "ì†Œë©¸ì „ ì½œë°±"
> 1. "ìŠ¤í”„ë§ ì¢…ë£Œ"

âœ‹
> **"ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì"** ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³  , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤. ë°˜ë©´ì— ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.ë”°ë¼ì„œ ìƒì„±ë‹¨ì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤. ë¬¼ë¡  ì´ˆê¸°í™” ì‘ì—…ì´ ë‚´ë¶€ ê°’ë“¤ë§Œ ì•½ê°„ ë³€ê²½í•˜ëŠ” ì •ë„ë¡œ ë‹¨ìˆœí•œ ê²½ìš°ì—ëŠ” ìƒì„±ìì—ì„œ í•œë²ˆì— ë‹¤ ì²˜ë¦¬í•˜ëŠ”ê²Œ ë” ë‚˜ì„ ìˆ˜ ìˆë‹¤.

***

## **ìŠ¤í”„ë§ì€ í¬ê²Œ 3ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.**
### **ì¸í„°í˜ì´ìŠ¤ (InitializingBean , DisposableBean)**
ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™” , ì¢…ë£Œ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°ì— ë‚˜ì˜¨ ë°©ë²•ë“¤ì´ê³  ,
ì§€ê¸ˆì€ ë” ë‚˜ì€ ë°©ë²•ë“¤ì´ ìˆì–´ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
{: .label .label-red}
#### Class
```java
public class NetworkClient implements InitializingBean , DisposableBean {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ , url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect(){
        System.out.println("Connect : " + url);
    }

    public void call(String message){
        System.out.println("Call : " + url + " message : "+ message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disconnect(){
        System.out.println("close : " + url);
    }

    @Override
    // ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚˜ë©´ í˜¸ì¶œ
    public void afterPropertiesSet() throws Exception {
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    @Override
    // ì„œë²„ê°€ ì¢…ë£Œ ë  ë•Œ
    public void destroy() throws Exception {
        System.out.println("destory");
        disconnect();
    }
}
```
#### Test
```java
public class BeanLifeCycleTest {

    @Test
    public void lifeCycleTest(){
        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        AnnotationConfigApplicationContext ac =
                new AnnotationConfigApplicationContext(LifeCycleConfig.class);

        NetworkClient bean = ac.getBean(NetworkClient.class);

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
        ac.close();
    }

    @Configuration
    static class LifeCycleConfig{
        @Bean
        public NetworkClient networkClient(){
            NetworkClient networkClient = new NetworkClient();
            networkClient.setUrl("http://hello-spring.dev");
            return networkClient;
        }
    }
}
```
#### ì¶œë ¥
```
ìƒì„±ì í˜¸ì¶œ , url = null
Connect : http://hello-spring.dev
Call : http://hello-spring.dev message : ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
destory
close : http://hello-spring.dev
```
#### ì´ˆê¸°í™” ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì 
- ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë‹¤. í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.
- ì´ˆê¸°í™” , ì†Œë©¸ ë©”ì†Œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
- ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.

***

### **ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ , ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •**
**ì„¤ì • ì •ë³´ì— `@Bean(InitMethod="init" , destroyMethod="close")`ì²˜ëŸ¼ ì´ˆê¸°í™” , ì†Œë©¸ ë©”ì†Œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.**

#### Class
```java
public class NetworkClient{
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ , url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect(){
        System.out.println("Connect : " + url);
    }

    public void call(String message){
        System.out.println("Call : " + url + " message : "+ message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disconnect(){
        System.out.println("close : " + url);
    }

    // ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚˜ë©´ í˜¸ì¶œ
    public void init() throws Exception {
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    // ì¢…ë£Œë  ë•Œ
    public void close() throws Exception {
        System.out.println("destory");
        disconnect();
    }
}
```

#### Test
```java
public class BeanLifeCycleTest {

    @Test
    public void lifeCycleTest(){
        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        AnnotationConfigApplicationContext ac =
                new AnnotationConfigApplicationContext(LifeCycleConfig.class);
        NetworkClient bean = ac.getBean(NetworkClient.class);

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
        ac.close();
    }

    @Configuration
    static class LifeCycleConfig{
        @Bean(initMethod = "init" , destroyMethod = "close")
        public NetworkClient networkClient(){
            NetworkClient networkClient = new NetworkClient();
            networkClient.setUrl("http://hello-spring.dev");
            return networkClient;
        }
    }
}
```
#### ì¶œë ¥
```
ìƒì„±ì í˜¸ì¶œ , url = null
Connect : http://hello-spring.dev
Call : http://hello-spring.dev message : ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
destory
close : http://hello-spring.dev
```

#### ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•
- **`@Bean`ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.**
- ë©”ì†Œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- **ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™” , ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.**

#### ì¢…ë£Œ ë©”ì†Œë“œ ì¶”ë¡ 
- `@Bean`ì˜ `destroyMethod`ì—ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆë‹¤.
- ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ `close` , `shutdown`ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
- `@Bean`ì˜ `destroyMethod`ëŠ” ê¸°ë³¸ê°’ì´ **"inferred"**(ì¶”ë¡ )ìœ¼ë¡œ ë“±ë¡ ë˜ì–´ ìˆë‹¤.
- ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ `close` , `shutdown`ì´ë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤.
- ì´ë¦„ ê·¸ëŒ€ë¡œ ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œ í•´ì¤€ë‹¤.
- **ë”°ë¼ì„œ ìŠ¤í”„ë§ ë¹ˆ`@Bean`ìœ¼ë¡œ ë“±ë¡í•˜ë©´ ì¢…ë£Œ ë©”ì†Œë“œëŠ” ë”°ë¡œ ì ì–´ì£¼ì§€ ì•Šì•„ë„ ì˜ ë™ì‘í•œë‹¤**
- ì¶”ë¡  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì‹«ìœ¼ë©´ ë¹ˆ ê³µë°±ì„ ì§€ì •í•˜ë©´ ëœë‹¤.

***

### ğŸ“Œ **`@PostConstruct` , `@PreDestory` ì• ë…¸í…Œì´ì…˜ ì§€ì • (ê¶Œì¥)**

#### Class
```java
package hello.core.lifeCycle;

// javaxëŠ” ìë°”ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê²ƒë“¤
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

public class NetworkClient{
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ , url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ
    public void connect(){
        System.out.println("Connect : " + url);
    }

    public void call(String message){
        System.out.println("Call : " + url + " message : "+ message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ
    public void disconnect(){
        System.out.println("close : " + url);
    }

    // ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëë‚˜ë©´ í˜¸ì¶œ
    @PostConstruct
    public void init() throws Exception {
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    // ì„œë²„ê°€ ì¢…ë£Œ ë  ë•Œ
    @PreDestroy
    public void close() throws Exception {
        System.out.println("destory");
        disconnect();
    }
}
```

#### Test
```java
public class BeanLifeCycleTest {

    @Test
    public void lifeCycleTest(){
        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        AnnotationConfigApplicationContext ac =
                new AnnotationConfigApplicationContext(LifeCycleConfig.class);
        NetworkClient bean = ac.getBean(NetworkClient.class);

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
        ac.close();
    }

    @Configuration
    static class LifeCycleConfig{
        @Bean
        public NetworkClient networkClient(){
            NetworkClient networkClient = new NetworkClient();
            networkClient.setUrl("http://hello-spring.dev");
            return networkClient;
        }
    }
}
```

#### ì¶œë ¥
```java
ìƒì„±ì í˜¸ì¶œ , url = null
Connect : http://hello-spring.dev
Call : http://hello-spring.dev message : ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
destory
close : http://hello-spring.dev
```

#### íŠ¹ì§•
- **ìµœì‹  ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤.**
- ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ ê¸°ìˆ ì´ ì•„ë‹ˆë¼ JSR-250ì´ë¼ëŠ” ìë°” í‘œì¤€ì´ë‹¤.ë”°ë¼ì„œ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”(ìë™ ë¹ˆ ë“±ë¡)ê³¼ ì˜ ì–´ìš¸ë¦°ë‹¤.
- **ìœ ì¼í•œ ë‹¨ì ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™” , ì¢…ë£Œ í•´ì•¼í•˜ë©´ `@Bean`ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì**
